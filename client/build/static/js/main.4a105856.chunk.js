(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{243:function(e,t,n){},244:function(e,t,n){},407:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(23),c=n.n(a),i=(n(243),n(244),n(221)),s=n(447),l=n(109),u=n(27),o=n(14),h=n(438),d=n(439),j=n(436),b=n(440),f=n(452),p=n(449);var O=n(3);function x(e){var t=e.data,n=e.onPlantPressed;return Object(O.jsx)(f.a,{children:t.map((function(e){var t=e._id;return Object(O.jsx)(p.a,{onClick:function(){return n(t)},children:Object(O.jsx)(g,{plant:e})})}))})}var g=function(e){var t=e.plant,n=function(e){var t=Object(r.useState)(0),n=Object(o.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(0),s=Object(o.a)(i,2),l=s[0],u=s[1],h=Object(r.useState)(0),d=Object(o.a)(h,2),j=d[0],b=d[1],f=Object(r.useState)(0),p=Object(o.a)(f,2),O=p[0],x=p[1];return Object(r.useEffect)((function(){if(e){var t=e.temperature,n=e.humidity,r=e.soil,a=e.light;if(t.length>0){var i=t[0];c(i)}if(n.length>0){var s=t[0];u(s)}if(r.length>0){var l=r[0];b(l)}if(a.length>0){var o=a[0];x(o)}}}),[e]),{temperature:a,humidity:l,soilMoisture:j,light:O}}(t);if(t){var a=t.name,c=n.temperature.value?"".concat(n.temperature.value," C"):"None",i=n.humidity.value?"".concat(n.humidity.value," %"):"None",s=n.soilMoisture.value?"".concat(n.soilMoisture.value," %"):"None";n.light.value&&n.light.value;return Object(O.jsxs)(p.a,{display:"flex",flexDirection:"row",borderRadius:10,margin:3,style:{backgroundColor:"#D3D3D3"},children:[Object(O.jsx)(p.a,{padding:1,children:Object(O.jsx)(j.a,{style:{fontSize:22},children:a})}),Object(O.jsxs)(p.a,{padding:1,children:[Object(O.jsx)(j.a,{children:"Temperature"}),Object(O.jsx)(j.a,{children:c})]}),Object(O.jsxs)(p.a,{padding:1,children:[Object(O.jsx)(j.a,{children:"Humidity"}),Object(O.jsx)(j.a,{children:i})]}),Object(O.jsxs)(p.a,{padding:1,children:[Object(O.jsx)(j.a,{children:"Soil Moisture"}),Object(O.jsx)(j.a,{children:s})]}),Object(O.jsxs)(p.a,{padding:1,children:[Object(O.jsx)(j.a,{children:"Light"}),Object(O.jsx)(j.a,{children:n.light.value?"ON":"OFF"})]})]})}return Object(O.jsx)(p.a,{display:"flex",flexDirection:"row",borderRadius:10,margin:3,style:{backgroundColor:"#D3D3D3"},children:Object(O.jsx)(p.a,{padding:1,children:Object(O.jsx)(j.a,{style:{fontSize:22},children:"No data available"})})})},m=n(22),v=n.n(m),y=n(127),T=n(39),w=n(251),S=function(){var e=Object(T.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get(t,{timeout:1e4});case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.abrupt("return",n.data);case 7:throw new Error(n.data.error);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(T.a)(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.post(t,n,{timeout:1e4});case 3:if(200!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",r.data);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),C={getPlants:function(){var e=Object(T.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S("/api/plants/"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPlant:function(){var e=Object(T.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S("/api/plant/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSensorData:function(){var e=Object(T.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S("/api/sensor_data/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createPlantSettings:function(){var e=Object(T.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k("/api/plant_settings/".concat(t),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};function D(){return Object(r.useContext)(P)}var P=Object(r.createContext)();function L(e){var t=e.children,n=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(T.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getPlants();case 2:return t=e.sent,e.next=5,Promise.all(t.map(function(){var e=Object(T.a)(v.a.mark((function e(t){var n,r,a,c,i,s,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.next=3,C.getPlant(n);case 3:return r=e.sent,e.next=6,C.getSensorData(n);case 6:return a=e.sent,c=a.map((function(e){return{date:e.date,value:e.temperature}})),i=a.map((function(e){return{date:e.date,value:e.humidity}})),s=a.map((function(e){return{date:e.date,value:e.moisture}})),l=a.map((function(e){return{date:e.date,value:e.lightOn}})),e.abrupt("return",Object(y.a)(Object(y.a)(Object(y.a)({},t),r),{},{temperature:c,humidity:i,soil:s,light:l}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:n=e.sent,a(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){c()}),[]),{plants:n,setPlants:a,getPlant:function(e){return n.find((function(t){return t._id===e}))}}}();return Object(O.jsx)(P.Provider,{value:n,children:t})}var I=n(451),E=n(437),F=n(448);function M(e){var t=e.open,n=e.handleClose,a=Object(r.useState)(""),c=Object(o.a)(a,2),i=c[0],s=c[1],l=Object(r.useState)(""),u=Object(o.a)(l,2),h=u[0],d=u[1];return Object(O.jsx)(I.a,{open:t,onClose:n,children:Object(O.jsx)(p.a,{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",alignItems:"center"},children:Object(O.jsxs)(p.a,{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:300,width:400,backgroundColor:"white",padding:10},children:[Object(O.jsxs)(p.a,{children:[Object(O.jsx)(j.a,{style:{fontSize:22},children:"Add Plant"}),Object(O.jsx)(N,{label:"Name",value:i,onChange:s}),Object(O.jsx)(N,{label:"I2C address",value:h,onChange:d})]}),Object(O.jsx)(E.a,{children:"Submit"})]})})})}var N=function(e){var t=e.label,n=e.value,r=e.onChange;return Object(O.jsxs)(p.a,{style:{display:"flex",flexDirection:"row",alignItems:"center",padding:5},children:[Object(O.jsx)(j.a,{style:{color:"black"},children:t}),Object(O.jsx)(F.a,{value:n,style:{marginLeft:5},onChange:function(e){r(e.target.value)},id:"standard-basic",variant:"standard"})]})},_=Object(h.a)((function(e){return{root:{overflowX:"auto",display:"flex",alignItems:"stretch",width:"100%",minHeight:"100vh"}}})),z=function(e){var t=_(),n=Object(u.f)(),a=Object(r.useState)(!1),c=Object(o.a)(a,2),i=c[0],s=c[1],l=D().plants;return Object(O.jsxs)("div",{className:t.root,children:[Object(O.jsxs)(d.a,{style:{paddingTop:20},children:[Object(O.jsx)(j.a,{style:{fontSize:26},children:"Plants"}),Object(O.jsx)(x,{data:l,onPlantPressed:function(e){n.replace("plant/".concat(e))}})]}),Object(O.jsx)(b.a,{color:"primary",onClick:function(){s(!0)},style:{position:"fixed",bottom:50,right:50}}),Object(O.jsx)(M,{open:i,handleClose:function(){s(!1)}})]})},H=n(441),B=n(442),R=n(446),A=n(219),J=n(220),K=n(223);function V(e){var t=e.title,n=e.data,a=e.yTickFormatter,c=e.type;return Object(r.useEffect)((function(){}),[n]),Object(O.jsxs)(p.a,{display:"flex",flexDirection:"column",width:"100%",height:400,margin:3,alignItems:"center",children:[Object(O.jsx)(j.a,{children:t}),Object(O.jsx)(H.a,{width:"100%",height:"100%",children:Object(O.jsxs)(B.a,{width:500,height:300,data:n,margin:{top:5,right:30,left:20,bottom:5},children:[Object(O.jsx)(R.a,{strokeDasharray:"3 3"}),Object(O.jsx)(A.a,{dataKey:"date",tickFormatter:function(e){return new Date(e).getTime()}}),Object(O.jsx)(J.a,{tickFormatter:a}),Object(O.jsx)(K.a,{type:c||"monotone",dataKey:"value",stroke:"#8884d8",activeDot:{r:8}})]})})]})}var X=n(453);function q(e){var t=e.temperatureThreshold,n=e.setTemperatureThreshold;return Object(O.jsxs)(p.a,{display:"flex",flexDirection:"column",children:[Object(O.jsx)(j.a,{children:"TemperatureThreshold"}),Object(O.jsx)(X.a,{valueLabelDisplay:"auto",value:t,min:0,max:50,defaultValue:20,onChange:function(e,t){n(t)}})]})}function G(e){var t=e.moistureThreshold,n=e.setMoistureThreshold;return Object(O.jsxs)(p.a,{display:"flex",flexDirection:"column",children:[Object(O.jsx)(j.a,{children:"MoistureThreshold"}),Object(O.jsx)(X.a,{valueLabelDisplay:"auto",defaultValue:30,value:t,onChange:function(e,t){n(t)}})]})}function Q(e){var t=e.lightThreshold,n=e.setLightThreshold;return Object(O.jsxs)(p.a,{children:[Object(O.jsx)(j.a,{children:"Light Threshold"}),Object(O.jsx)(U,{handleChange:function(e,t){n(t)},lightThreshold:t})]})}function U(e){var t=e.handleChange,n=e.lightThreshold;return Object(O.jsx)(p.a,{sx:{width:300},children:Object(O.jsx)(X.a,{getAriaLabel:function(){return"Temperature range"},value:n,onChange:t,valueLabelDisplay:"auto",min:1,max:24})})}var W=Object(h.a)((function(e){return{root:{overflowX:"auto",display:"flex",alignItems:"stretch",width:"100%",minHeight:"100vh"}}})),Y=function(e){var t=e.temperatureThreshold,n=e.setTemperatureThreshold,r=e.moistureThreshold,a=e.setMoistureThreshold,c=e.lightThreshold,i=e.setLightThreshold,s=e.handleSavePress;return Object(O.jsxs)(p.a,{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:1,style:{backgroundColor:"#D3D3D3",borderRadius:20},children:[Object(O.jsx)(j.a,{children:"Plant Settings"}),Object(O.jsxs)(p.a,{display:"flex",width:"100%",children:[Object(O.jsxs)(p.a,{display:"flex",flexDirection:"column",width:"50%",margin:2,children:[Object(O.jsx)(q,{temperatureThreshold:t,setTemperatureThreshold:n}),Object(O.jsx)(G,{moistureThreshold:r,setMoistureThreshold:a})]}),Object(O.jsx)(p.a,{display:"flex",flexDirection:"column",width:"50%",margin:2,children:Object(O.jsx)(Q,{lightThreshold:c,setLightThreshold:i})})]}),Object(O.jsx)(E.a,{onClick:s,children:"Save"})]})},Z=function(e){var t=W(),n=Object(u.f)(),a=D().getPlant,c=Object(r.useState)(null),i=Object(o.a)(c,2),s=i[0],l=i[1],h=Object(u.g)().id,j=Object(r.useState)(0),b=Object(o.a)(j,2),f=b[0],p=b[1],x=Object(r.useState)(0),m=Object(o.a)(x,2),y=m[0],w=m[1],S=Object(r.useState)([1,24]),k=Object(o.a)(S,2),P=k[0],L=k[1],I=Object(r.useState)([]),F=Object(o.a)(I,2),M=F[0],N=F[1],_=Object(r.useState)([]),z=Object(o.a)(_,2),H=z[0],B=z[1],R=Object(r.useState)([]),A=Object(o.a)(R,2),J=A[0],K=A[1],X=Object(r.useState)([]),q=Object(o.a)(X,2),G=q[0],Q=q[1];Object(r.useEffect)((function(){var e=a(h);l(e)}),[h]),Object(r.useEffect)((function(){if(s){console.log(s);var e=s.temperature,t=s.humidity,n=s.light,r=s.soil,a=s.plantSettings,c=a.moistureThreshold,i=a.temperatureThreshold,l=a.lightStart,u=a.lightEnd;w(c),p(i),L([l,u]),K(r),N(e),B(t),Q(n)}}),[s]);var U=function(){var e=Object(T.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.createPlantSettings(h,{plantId:h,moistureThreshold:y,temperatureThreshold:f,lightStart:P[0],lightEnd:P[1]});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:t.root,children:Object(O.jsxs)(d.a,{style:{paddingTop:20},children:[Object(O.jsx)(E.a,{onClick:function(){n.replace("/")},children:"Back"}),Object(O.jsx)(g,{plant:s}),Object(O.jsx)(Y,{temperatureThreshold:f,setTemperatureThreshold:p,moistureThreshold:y,setMoistureThreshold:w,lightThreshold:P,setLightThreshold:L,handleSavePress:U}),Object(O.jsx)(V,{title:"Temperature",data:M}),Object(O.jsx)(V,{title:"Humidity",data:H}),Object(O.jsx)(V,{title:"Soil",data:J}),Object(O.jsx)(V,{title:"Light",data:G,type:"step",yTickFormatter:function(e){return e?1:0}})]})})},$=Object(i.a)(),ee=function(){return Object(O.jsx)(L,{children:Object(O.jsx)(s.a,{theme:$,children:Object(O.jsx)(l.a,{children:Object(O.jsx)("div",{style:{display:"flex",alignItems:"stretch",backgroundColor:"#e6e6e6"},children:Object(O.jsxs)(u.c,{children:[Object(O.jsx)(u.a,{exact:!0,path:"/",children:Object(O.jsx)(z,{})}),Object(O.jsx)(u.a,{path:"/plant/:id",children:Object(O.jsx)(Z,{})})]})})})})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,455)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};c.a.render(Object(O.jsx)(ee,{}),document.getElementById("root")),te()}},[[407,1,2]]]);
//# sourceMappingURL=main.4a105856.chunk.js.map